<div class="announcement">
  <div class="announcement__wrapper">
    {%- assign announcement = section.blocks | where: "type", "announcement" -%}
    {% for block in announcement %}
      <div class="announcement-slide">
        {%- if block.settings.announcement_link != blank -%}
          <a href="{{ block.settings.announcement_link }}" class="announcement__link">
        {%- endif -%}
    
        <div class="announcement__text" data-text="{{ block.settings.announcement_text | strip_html | handle }}">
          {{ block.settings.announcement_text }}
        </div>
    
        {%- if block.settings.announcement_link != blank -%}
          </a>
        {%- endif -%}
      </div>
    {% endfor %}
  </div>
</div>
