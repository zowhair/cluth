{%- liquid
    assign formID = section.settings.formID
-%}

<iframe id="affiliate-sign-up-form" style="border: 0; width: 100%; height: 100vh;" src="https://app.socialsnowball.io/register-form/7516/{{ formID }}"></iframe>
<script>
  (function() {
    const iframe = document.querySelector("#affiliate-sign-up-form");
    window.addEventListener("message", (event) => {
      if (event.origin === new URL(iframe.getAttribute("src")).origin) {
        iframe.style.height = event.data.height + "px";
      }
    });
  })();
</script>

{% schema %}
    {
        "name": "Affiliate form",
        "class": "affiliate-form",
        "settings": [
            {
                "type": "text",
                "id": "formID",
                "label": "Form ID"
            }
        ],
        "presets": [
            {
                "name": "Affiliate form"
            }
        ]
    }
{% endschema %}